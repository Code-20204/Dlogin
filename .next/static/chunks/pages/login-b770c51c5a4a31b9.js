(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6953:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var r=a(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},6429:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(3979)}])},3979:function(e,s,a){"use strict";a.r(s),a.d(s,{__N_SSP:function(){return m},default:function(){return Login}});var r=a(5893),t=a(7294),n=a(3299),i=a(1163);a(1664);var l=a(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,l.Z)("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);var d=a(6953);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,l.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),u=(0,l.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=!0;function Login(){let[e,s]=(0,t.useState)(!0),[a,l]=(0,t.useState)(!1),[m,h]=(0,t.useState)(!1),[g,x]=(0,t.useState)(""),[f,b]=(0,t.useState)({email:"",password:"",name:""}),p=(0,i.useRouter)(),handleSubmit=async s=>{s.preventDefault(),h(!0),x("");try{if(e){let e=await (0,n.signIn)("credentials",{email:f.email,password:f.password,redirect:!1});(null==e?void 0:e.error)?x("邮箱或密码错误"):p.push("/dashboard")}else{let e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),s=await e.json();if(e.ok){let e=await (0,n.signIn)("credentials",{email:f.email,password:f.password,redirect:!1});(null==e?void 0:e.error)||p.push("/dashboard")}else x(s.message||"注册失败")}}catch(e){x("网络错误，请重试")}finally{h(!1)}},handleOAuthSignIn=async e=>{h(!0);try{await (0,n.signIn)(e,{callbackUrl:"/dashboard"})}catch(e){x("登录失败，请重试"),h(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,r.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"DLogin 任务管理"}),(0,r.jsx)("p",{className:"text-gray-600",children:e?"登录您的账户":"创建新账户"})]}),g&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:g}),(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,r.jsxs)("button",{onClick:()=>handleOAuthSignIn("github"),disabled:m,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,r.jsx)(o,{className:"w-5 h-5 mr-3"}),"使用 GitHub 登录"]}),(0,r.jsxs)("button",{onClick:()=>handleOAuthSignIn("google"),disabled:m,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 mr-3"}),"使用 Google 登录"]})]}),(0,r.jsxs)("div",{className:"relative mb-6",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"或"})})]}),(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[!e&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"姓名"}),(0,r.jsx)("input",{id:"name",type:"text",value:f.name,onChange:e=>b({...f,name:e.target.value}),className:"w-full px-3 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"请输入您的姓名"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"邮箱地址"}),(0,r.jsx)("input",{id:"email",type:"email",required:!0,value:f.email,onChange:e=>b({...f,email:e.target.value}),className:"w-full px-3 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"请输入您的邮箱"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"密码"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{id:"password",type:a?"text":"password",required:!0,value:f.password,onChange:e=>b({...f,password:e.target.value}),className:"w-full px-3 py-3 pr-10 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:e?"请输入密码":"请设置密码（至少6位）",minLength:e?void 0:6}),(0,r.jsx)("button",{type:"button",onClick:()=>l(!a),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:a?(0,r.jsx)(c,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(u,{className:"h-5 w-5 text-gray-400"})})]})]}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"处理中...":e?"登录":"注册"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsx)("button",{onClick:()=>{s(!e),x(""),b({email:"",password:"",name:""})},className:"text-indigo-600 hover:text-indigo-500 text-sm font-medium",children:e?"没有账户？立即注册":"已有账户？立即登录"})})]})})})}}},function(e){e.O(0,[701,774,888,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);