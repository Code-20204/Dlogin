"use strict";(()=>{var e={};e.id=758,e.ids=[758],e.modules={2104:e=>{e.exports=require("@next-auth/prisma-adapter")},3524:e=>{e.exports=require("@prisma/client")},8432:e=>{e.exports=require("bcryptjs")},3227:e=>{e.exports=require("next-auth")},2113:e=>{e.exports=require("next-auth/next")},7449:e=>{e.exports=require("next-auth/providers/credentials")},7459:e=>{e.exports=require("next-auth/providers/github")},3598:e=>{e.exports=require("next-auth/providers/google")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1662:(e,t,r)=>{r.r(t),r.d(t,{config:()=>p,default:()=>l,routeModule:()=>m});var s={};r.r(s),r.d(s,{default:()=>handler});var i=r(1802),a=r(7153),o=r(6249),n=r(2113),d=r(8417),u=r(4637);async function handler(e,t){let r=await (0,n.getServerSession)(e,t,d.authOptions);if(!r)return t.status(401).json({message:"Unauthorized"});let{itemId:s}=e.query,i=r.user.id;switch(e.method){case"GET":try{let e=await u._.listItem.findFirst({where:{id:s,list:{userId:i}},include:{list:!0}});if(!e)return t.status(404).json({message:"Item not found"});t.status(200).json(e)}catch(e){console.error("Get item error:",e),t.status(500).json({message:"Internal server error"})}break;case"PUT":try{let{title:r,description:a,dueDate:o,completed:n,priority:d}=e.body,l=await u._.listItem.findFirst({where:{id:s,list:{userId:i}},include:{list:!0}});if(!l)return t.status(404).json({message:"Item not found"});let p=await u._.listItem.update({where:{id:s},data:{title:void 0!==r?r:l.title,description:void 0!==a?a:l.description,dueDate:void 0!==o?o?new Date(o):null:l.dueDate,completed:void 0!==n?n:l.completed,priority:void 0!==d?d:l.priority}});t.status(200).json(p)}catch(e){console.error("Update item error:",e),t.status(500).json({message:"Internal server error"})}break;case"DELETE":try{let e=await u._.listItem.findFirst({where:{id:s,list:{userId:i}}});if(!e)return t.status(404).json({message:"Item not found"});await u._.listItem.delete({where:{id:s}}),t.status(200).json({message:"Item deleted successfully"})}catch(e){console.error("Delete item error:",e),t.status(500).json({message:"Internal server error"})}break;default:t.status(405).json({message:"Method not allowed"})}}let l=(0,o.l)(s,"default"),p=(0,o.l)(s,"config"),m=new i.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/items/[itemId]",pathname:"/api/items/[itemId]",bundlePath:"",filename:""},userland:s})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[222,417],()=>__webpack_exec__(1662));module.exports=r})();