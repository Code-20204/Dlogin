"use strict";(()=>{var e={};e.id=878,e.ids=[878],e.modules={2104:e=>{e.exports=require("@next-auth/prisma-adapter")},3524:e=>{e.exports=require("@prisma/client")},8432:e=>{e.exports=require("bcryptjs")},3227:e=>{e.exports=require("next-auth")},2113:e=>{e.exports=require("next-auth/next")},7449:e=>{e.exports=require("next-auth/providers/credentials")},7459:e=>{e.exports=require("next-auth/providers/github")},3598:e=>{e.exports=require("next-auth/providers/google")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6393:(e,t,r)=>{r.r(t),r.d(t,{config:()=>p,default:()=>l,routeModule:()=>m});var s={};r.r(s),r.d(s,{default:()=>handler});var a=r(1802),i=r(7153),n=r(6249),o=r(2113),u=r(8417),d=r(4637);async function handler(e,t){let r=await (0,o.getServerSession)(e,t,u.authOptions);if(!r)return t.status(401).json({message:"Unauthorized"});let{listId:s}=e.query,a=r.user.id,i=await d._.list.findFirst({where:{id:s,userId:a}});if(!i)return t.status(404).json({message:"List not found"});switch(e.method){case"GET":try{let e=await d._.listItem.findMany({where:{listId:s},orderBy:{createdAt:"desc"}});t.status(200).json(e)}catch(e){console.error("Get items error:",e),t.status(500).json({message:"Internal server error"})}break;case"POST":try{let{title:r,description:a,dueDate:n,priority:o="medium"}=e.body;if(!r)return t.status(400).json({message:"Title is required"});if("AUTO"===i.type)return t.status(400).json({message:"Cannot add items to automated lists"});let u=await d._.listItem.create({data:{title:r,description:a,dueDate:n?new Date(n):null,priority:o,listId:s}});t.status(201).json(u)}catch(e){console.error("Create item error:",e),t.status(500).json({message:"Internal server error"})}break;default:t.status(405).json({message:"Method not allowed"})}}let l=(0,n.l)(s,"default"),p=(0,n.l)(s,"config"),m=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/lists/[listId]/items",pathname:"/api/lists/[listId]/items",bundlePath:"",filename:""},userland:s})}};var t=require("../../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[222,417],()=>__webpack_exec__(6393));module.exports=r})();